<?php

/**
 * Add meta.subtitle to all 12 Image tools - ENGLISH, SPANISH, RUSSIAN
 * All languages in one comprehensive script
 */

$subtitles = [
    'en' => [
        'base64-to-image-converter' => 'Decode Base64 strings to image files instantly with multiple format support',
        'heic-to-jpg-converter' => 'Convert Apple HEIC images to JPG format for universal compatibility',
        'ico-converter' => 'Create ICO favicon files from images for websites and applications',
        'image-converter' => 'Convert images between formats: JPG, PNG, WebP, SVG & more instantly',
        'image-to-base64-converter' => 'Encode images to Base64 strings for embedding in HTML & CSS',
        'jpg-to-png-converter' => 'Convert JPG images to PNG format with transparency support',
        'jpg-to-webp-converter' => 'Convert JPG to WebP format for faster web performance & smaller files',
        'png-to-jpg-converter' => 'Convert PNG images to JPG format for reduced file size',
        'png-to-webp-converter' => 'Convert PNG to WebP for modern web optimization & better compression',
        'svg-to-jpg-converter' => 'Convert vector SVG graphics to raster JPG images with custom sizing',
        'svg-to-png-converter' => 'Convert SVG vector files to PNG raster images with transparency',
        'webp-to-jpg-converter' => 'Convert WebP images to JPG format for maximum compatibility',
    ],
    'es' => [
        'base64-to-image-converter' => 'Decodifique cadenas Base64 a archivos de imagen al instante con múltiples formatos',
        'heic-to-jpg-converter' => 'Convierta imágenes HEIC de Apple a formato JPG para compatibilidad universal',
        'ico-converter' => 'Cree archivos ICO favicon desde imágenes para sitios web y aplicaciones',
        'image-converter' => 'Convierta imágenes entre formatos: JPG, PNG, WebP, SVG y más al instante',
        'image-to-base64-converter' => 'Codifique imágenes a cadenas Base64 para incrustar en HTML & CSS',
        'jpg-to-png-converter' => 'Convierta imágenes JPG a formato PNG con soporte de transparencia',
        'jpg-to-webp-converter' => 'Convierta JPG a formato WebP para mejor rendimiento web y archivos más pequeños',
        'png-to-jpg-converter' => 'Convierta imágenes PNG a formato JPG para reducir tamaño de archivo',
        'png-to-webp-converter' => 'Convierta PNG a WebP para optimización web moderna y mejor compresión',
        'svg-to-jpg-converter' => 'Convierta gráficos vectoriales SVG a imágenes raster JPG con tamaño personalizado',
        'svg-to-png-converter' => 'Convierta archivos vectoriales SVG a imágenes raster PNG con transparencia',
        'webp-to-jpg-converter' => 'Convierta imágenes WebP a formato JPG para máxima compatibilidad',
    ],
    'ru' => [
        'base64-to-image-converter' => 'Декодируйте Base64 строки в файлы изображений мгновенно с поддержкой форматов',
        'heic-to-jpg-converter' => 'Конвертируйте Apple HEIC изображения в JPG для универсальной совместимости',
        'ico-converter' => 'Создавайте ICO favicon файлы из изображений для сайтов и приложений',
        'image-converter' => 'Конвертируйте изображения между форматами: JPG, PNG, WebP, SVG и др. мгновенно',
        'image-to-base64-converter' => 'Кодируйте изображения в Base64 строки для встраивания в HTML & CSS',
        'jpg-to-png-converter' => 'Конвертируйте JPG изображения в PNG формат с поддержкой прозрачности',
        'jpg-to-webp-converter' => 'Конвертируйте JPG в WebP для быстрой работы веб-сайта и меньших файлов',
        'png-to-jpg-converter' => 'Конвертируйте PNG изображения в JPG для уменьшения размера файла',
        'png-to-webp-converter' => 'Конвертируйте PNG в WebP для современной веб-оптимизации и лучшего сжатия',
        'svg-to-jpg-converter' => 'Конвертируйте векторную SVG графику в растровые JPG изображения с настройкой размера',
        'svg-to-png-converter' => 'Конвертируйте векторные SVG файлы в растровые PNG с прозрачностью',
        'webp-to-jpg-converter' => 'Конвертируйте WebP изображения в JPG для максимальной совместимости',
    ],
];

$h1s = [
    'en' => [
        'base64-to-image-converter' => 'Base64 to Image Converter',
        'heic-to-jpg-converter' => 'HEIC to JPG Converter',
        'ico-converter' => 'ICO Converter',
        'image-converter' => 'Image Converter',
        'image-to-base64-converter' => 'Image to Base64 Converter',
        'jpg-to-png-converter' => 'JPG to PNG Converter',
        'jpg-to-webp-converter' => 'JPG to WebP Converter',
        'png-to-jpg-converter' => 'PNG to JPG Converter',
        'png-to-webp-converter' => 'PNG to WebP Converter',
        'svg-to-jpg-converter' => 'SVG to JPG Converter',
        'svg-to-png-converter' => 'SVG to PNG Converter',
        'webp-to-jpg-converter' => 'WebP to JPG Converter',
    ],
    'es' => [
        'base64-to-image-converter' => 'Convertidor de Base64 a Imagen',
        'heic-to-jpg-converter' => 'Convertidor de HEIC a JPG',
        'ico-converter' => 'Convertidor ICO',
        'image-converter' => 'Convertidor de Imágenes',
        'image-to-base64-converter' => 'Convertidor de Imagen a Base64',
        'jpg-to-png-converter' => 'Convertidor de JPG a PNG',
        'jpg-to-webp-converter' => 'Convertidor de JPG a WebP',
        'png-to-jpg-converter' => 'Convertidor de PNG a JPG',
        'png-to-webp-converter' => 'Convertidor de PNG a WebP',
        'svg-to-jpg-converter' => 'Convertidor de SVG a JPG',
        'svg-to-png-converter' => 'Convertidor de SVG a PNG',
        'webp-to-jpg-converter' => 'Convertidor de WebP a JPG',
    ],
    'ru' => [
        'base64-to-image-converter' => 'Конвертер Base64 в изображение',
        'heic-to-jpg-converter' => 'Конвертер HEIC в JPG',
        'ico-converter' => 'Конвертер ICO',
        'image-converter' => 'Конвертер изображений',
        'image-to-base64-converter' => 'Конвертер изображения в Base64',
        'jpg-to-png-converter' => 'Конвертер JPG в PNG',
        'jpg-to-webp-converter' => 'Конвертер JPG в WebP',
        'png-to-jpg-converter' => 'Конвертер PNG в JPG',
        'png-to-webp-converter' => 'Конвертер PNG в WebP',
        'svg-to-jpg-converter' => 'Конвертер SVG в JPG',
        'svg-to-png-converter' => 'Конвертер SVG в PNG',
        'webp-to-jpg-converter' => 'Конвертер WebP в JPG',
    ],
];

function beautifyOutput($translations)
{
    $output = "<?php\n\nreturn [\n";

    foreach ($translations as $toolSlug => $toolData) {
        $output .= "    // " . ucwords(str_replace('-', ' ', $toolSlug)) . "\n";
        $output .= "    '{$toolSlug}' => [\n";

        if (isset($toolData['meta'])) {
            $output .= "        'meta' => [\n";
            if (isset($toolData['meta']['h1'])) {
                $h1 = str_replace("'", "\\'", $toolData['meta']['h1']);
                $output .= "            'h1' => '{$h1}',\n";
            }
            if (isset($toolData['meta']['subtitle'])) {
                $subtitle = str_replace("'", "\\'", $toolData['meta']['subtitle']);
                $output .= "            'subtitle' => '{$subtitle}',\n";
            }
            $output .= "        ],\n";
        }

        if (isset($toolData['seo'])) {
            $output .= "        'seo' => [\n";
            foreach ($toolData['seo'] as $key => $value) {
                $escapedValue = str_replace("'", "\\'", $value);
                $output .= "            '{$key}' => '{$escapedValue}',\n";
            }
            $output .= "        ],\n";
        }

        if (isset($toolData['form'])) {
            $output .= "        'form' => [\n";
            foreach ($toolData['form'] as $key => $value) {
                $escapedValue = str_replace("'", "\\'", $value);
                $output .= "            '{$key}' => '{$escapedValue}',\n";
            }
            $output .= "        ],\n";
        }

        if (isset($toolData['content'])) {
            $output .= "        'content' => [\n";
            foreach ($toolData['content'] as $key => $value) {
                $escapedValue = str_replace("'", "\\'", $value);
                $output .= "            '{$key}' => '{$escapedValue}',\n";
            }
            $output .= "        ],\n";
        }

        $output .= "    ],\n\n";
    }

    $output .= "];\n";
    return $output;
}

$languages = ['en', 'es', 'ru'];
$totalUpdated = 0;

foreach ($languages as $lang) {
    echo "\n=== Processing {$lang} ===\n";

    $file = __DIR__ . "/resources/lang/{$lang}/tools/images.php";
    $translations = include $file;
    $updated = 0;

    foreach ($subtitles[$lang] as $slug => $subtitle) {
        if (isset($translations[$slug])) {
            if (!isset($translations[$slug]['meta'])) {
                $translations[$slug]['meta'] = [];
            }
            if (!isset($translations[$slug]['meta']['h1'])) {
                $translations[$slug]['meta']['h1'] = $h1s[$lang][$slug];
            }
            $translations[$slug]['meta']['subtitle'] = $subtitle;
            echo "✓ Added {$lang} subtitle for: $slug\n";
            $updated++;
        } else {
            echo "⚠ Tool not found: $slug\n";
        }
    }

    file_put_contents($file, beautifyOutput($translations));
    echo "✅ {$lang} complete: {$updated}/12\n";
    $totalUpdated += $updated;
}

echo "\n=== FINAL SUMMARY ===\n";
echo "Total subtitles added: {$totalUpdated}\n";
echo "All 12 image tools updated across EN, ES, RU!\n";
